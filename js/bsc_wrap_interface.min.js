var checkAllowanceTimer,wrapTimer,detectMetamask=!1,metamaskConnected=!1,userAddress="",stbbAddress="0xE1316066af35fbfF54f870eA6d1468255602a696",stbbLPAddress="0x95dCb8a62d2d8dc51dcef3E2f0Ff376583A14b9C",wbnbAddress="0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",bnbChainLinkOracle="0x0567F2323251f0Aab15c8dFb1967E4e8A7D42aeE",stbbPrice=new BigNumber(0),bnbPrice=new BigNumber(0),contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_deposit="b6b55f25",contract_deposit_multi="e2bbb158",contract_redeem="db006a75",contract_tokenprice="7b1b1de6",contract_view_withdrawtoken="c650ea59",contract_withdraw_avail="3ef054c2",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_rewardrate="",contract_balanceofstbb="82a5feb7",contract_rewardearned="008cc262",contract_exitstake="d91f8f2b",contract_claimreward="3d18b912",contract_rewardrate="7e1a3786",contract_gettotalstbb="69e1a4ef",contract_stake="ff9373cf",contract_latestAnswer="50d25bcd",targetNetwork=56,tokenList=[],tokenRotation=0;function loadTokenList(){var e=[];e[0]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},e[1]={token:"0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3",decimals:18,symbol:"DAI"},e[2]={token:"0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",decimals:18,symbol:"USDC"},e[3]={token:"0x55d398326f99059fF775485246999027B3197955",decimals:18,symbol:"USDT"},tokenList.push({zToken:"0x62b39BEB9e784e957CD112706919a9F6bACE0Cc5",underlying:e,units:"zsb-USD",underlyingUnits:"USD",decimals:18,panel:"0",tokenType:0,blockCheckpoint:23467242,checkpointPrice:"1055505088830161553"})}function loadInactiveTokenList(){(e=[])[0]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0x41F906c13a37DD18Efc00D5F2590929e3E73EEc7",underlying:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",withdrawTokens:e,units:"zsb-BUSD",underlyingUnits:"BUSD",decimals:18,panel:"16",tokenType:1,blockCheckpoint:-1,checkpointPrice:"999943000000000000"}),(e=[])[0]={token:"0xae70E3f6050d6AB05E03A50c655309C2148615bE",decimals:18,symbol:"AUSDLP"},tokenList.push({zToken:"0xf988eB0889bA049145c09392D1C3a89Db8dEB930",underlying:"0xae70E3f6050d6AB05E03A50c655309C2148615bE",withdrawTokens:e,units:"zsb-AUSDLP",underlyingUnits:"AUSDLP",decimals:18,panel:"13",tokenType:1,blockCheckpoint:-1,checkpointPrice:"1000000000000000000"}),(e=[])[0]={token:"0xB343F4cDE5e2049857898E800CD385247e21836D",decimals:18,symbol:"USDDLPv2"},tokenList.push({zToken:"0xCeef19C73D94EeA3EEc4207120aECb0BE3B08554",underlying:"0xB343F4cDE5e2049857898E800CD385247e21836D",withdrawTokens:e,units:"zsb-USDDLPv2",underlyingUnits:"USDDLPv2",decimals:18,panel:"15",tokenType:1,blockCheckpoint:-1,checkpointPrice:"1014218357068851040"}),(e=[])[0]={token:"0x7dEb9906BD1d77B410a56E5C23c36340Bd60C983",decimals:18,symbol:"STATIC"},e[1]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0x37fF51b19B51a8dd659Ac0F1093ebEa32F4c2933",underlying:"0x7dEb9906BD1d77B410a56E5C23c36340Bd60C983",withdrawTokens:e,units:"zsb-STATIC",underlyingUnits:"STATIC",decimals:18,panel:"11",tokenType:1,blockCheckpoint:-1,checkpointPrice:"423802727775045314"});var e=[];e[0]={token:"0x2170Ed0880ac9A755fd29B2688956BD959F933F8",decimals:18,symbol:"ETH"},e[1]={token:"0x973616ff3b9d8F88411C5b4E6F928EE541e4d01f",decimals:18,symbol:"ANKRETH"},e[2]={token:"0x250632378E573c6Be1AC2f97Fcdf00515d0Aa91B",decimals:18,symbol:"BETH"},tokenList.push({zToken:"0xD256E756BCd536b0C6c6630C5b31Da5ecF21568A",underlying:e,units:"zsb-ETH",underlyingUnits:"ETH",decimals:18,panel:"3",tokenType:0,blockCheckpoint:-1,checkpointPrice:"1180605150748174881"}),(e=[])[0]={token:"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7",decimals:18,symbol:"USDG"},e[1]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0x507Cd42d23853463F1Ec7bec88100e22c125C181",underlying:"0x85E76cbf4893c1fbcB34dCF1239A91CE2A4CF5a7",withdrawTokens:e,units:"zsb-USDG",underlyingUnits:"USDG",decimals:18,panel:"6",tokenType:1,blockCheckpoint:-1,checkpointPrice:"1242617112680840840"}),(e=[])[0]={token:"0x23396cF899Ca06c4472205fC903bDB4de249D6fC",decimals:18,symbol:"UST"},e[1]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0xbd4666F561632bA33680cD24adf2c4C12FF303B4",underlying:"0x23396cF899Ca06c4472205fC903bDB4de249D6fC",withdrawTokens:e,units:"zsb-UST",underlyingUnits:"UST",decimals:18,panel:"8",tokenType:1,blockCheckpoint:-1,checkpointPrice:"1040165749254577910"}),(e=[])[0]={token:"0xfF54da7CAF3BC3D34664891fC8f3c9B6DeA6c7A5",decimals:18,symbol:"DOLLY"},e[1]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0xaE0a2e71c9Bf3596511aE76164368954D900623c",underlying:"0xfF54da7CAF3BC3D34664891fC8f3c9B6DeA6c7A5",withdrawTokens:e,units:"zsb-DOLLY",underlyingUnits:"DOLLY",decimals:18,panel:"9",tokenType:1,blockCheckpoint:-1,checkpointPrice:"495390441631572417670"}),(e=[])[0]={token:"0x7b65B489fE53fCE1F6548Db886C08aD73111DDd8",decimals:18,symbol:"IRON"},e[1]={token:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",decimals:18,symbol:"BUSD"},tokenList.push({zToken:"0xbdF5A2d30C69bD2557e9dAE4a30e5A426141293E",underlying:"0x7b65B489fE53fCE1F6548Db886C08aD73111DDd8",withdrawTokens:e,units:"zsb-IRON2",underlyingUnits:"IRON",decimals:18,panel:"10",tokenType:1,blockCheckpoint:-1}),(e=[])[0]={token:"0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",decimals:18,symbol:"BTCB"},e[1]={token:"0xfCe146bF3146100cfe5dB4129cf6C82b0eF4Ad8c",decimals:8,symbol:"RENBTC"},e[2]={token:"0x6b77F51d4C474EFB15b72B829e6a0806bbc33724",decimals:18,symbol:"DBTC"},tokenList.push({zToken:"0x755966B34135Cd34Dbc880fCF82C751f26872390",underlying:e,units:"zsb-BTC",underlyingUnits:"BTC",decimals:18,panel:"5",tokenType:0,blockCheckpoint:-1}),(e=[])[0]={token:"0x35e869B7456462b81cdB5e6e42434bD27f3F788c",decimals:18,symbol:"MDO"},e[1]={token:"0x190b589cf9Fb8DDEabBFeae36a813FFb2A702454",decimals:18,symbol:"BDO"},tokenList.push({zToken:"0x31e0c311EE4cECe47729e295ED6108372C5f4e42",underlying:e,units:"zsb-MBDO",underlyingUnits:"MBDO",decimals:18,panel:"7",tokenType:0,blockCheckpoint:-1}),(e=[])[0]={token:"0x7b65B489fE53fCE1F6548Db886C08aD73111DDd8",decimals:18,symbol:"IRON"},e[1]={token:"0x6334D757FDa9326fa1fAe7f9762485B722403ceE",decimals:18,symbol:"VDOL"},tokenList.push({zToken:"0xfF756ceb8aca17C302E33cfa9b368F8002926453",underlying:"0x7b65B489fE53fCE1F6548Db886C08aD73111DDd8",withdrawTokens:e,units:"zsb-IRON",underlyingUnits:"IRON",decimals:18,panel:"1",tokenType:1,blockCheckpoint:-1}),(e=[])[0]={token:"0x35e869B7456462b81cdB5e6e42434bD27f3F788c",decimals:18,symbol:"MDO"},e[1]={token:"0x4BD17003473389A42DAF6a0a729f6Fdb328BbBd7",decimals:18,symbol:"VAI"},tokenList.push({zToken:"0x76F4bFB6C8ea2397bB5D7c2AaF49846F9E34c6A1",underlying:"0x35e869B7456462b81cdB5e6e42434bD27f3F788c",withdrawTokens:e,units:"zsb-MDO",underlyingUnits:"MDO",decimals:18,panel:"4",tokenType:1,blockCheckpoint:-1}),(e=[])[0]={token:"0x190b589cf9Fb8DDEabBFeae36a813FFb2A702454",decimals:18,symbol:"BDO"},e[1]={token:"0x4BD17003473389A42DAF6a0a729f6Fdb328BbBd7",decimals:18,symbol:"VAI"},tokenList.push({zToken:"0xFAAC2Fe54935029B9b872d5a4020493A21dC020f",underlying:"0x190b589cf9Fb8DDEabBFeae36a813FFb2A702454",withdrawTokens:e,units:"zsb-BDO",underlyingUnits:"BDO",decimals:18,panel:"2",tokenType:1,blockCheckpoint:-1})}function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}$(window).on("load",function(){checkMetaMaskExist()});async function enableMetaMask(){var e,t=await ethereum.request({method:"eth_requestAccounts"});t&&(e=await ethereum.request({method:"eth_chainId"}),0==(e=new BigNumber("0x"+e.substring(2))).comparedTo(targetNetwork)?(userAddress=t[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),refreshTokenData(!0),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})):0==e.comparedTo(1)?window.location.replace("../../"):alert("This application requires the BSC network, please switch it in your MetaMask UI."))}function metamaskButtonClick(){0==detectMetamask?window.open("https://metamask.io/","_blank"):1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function showInactiveWraps(){$("#inactive_wraps_controller").html("INACTIVE WRAPS"),$("#inactive_wraps_container").show(),0==tokenRotation?(tokenRotation=tokenList.length,loadInactiveTokenList(),clearTimeout(wrapTimer),wrapTimer=window.setTimeout(function(){refreshTokenData(!0)},6e4),refreshPoolData(!1)):loadInactiveTokenList()}function getStrategyInterestRate(o){var a,t=tokenList[o].zToken,i=tokenList[o].blockCheckpoint;i<0?$("#panel_"+tokenList[o].panel+"_apy").html("N/A"):0!=i&&(i=new BigNumber(i),a=new BigNumber(tokenList[o].checkpointPrice),ethereum.request({method:"eth_blockNumber",params:[]}).then(e=>{var e=e.substring(2),n=new BigNumber("0x"+e.substring(0,64));n.minus(14400).comparedTo(i)<0||(e=[{to:t,data:"0x"+contract_tokenprice},"0x"+n.toString(16)],ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)).div(a).minus(1),t=n.minus(i).div(28800);0==t.comparedTo(0)&&(t=new BigNumber(1));t=e.div(t).times(100).times(365);0<t.comparedTo(1e-5)&&$("#panel_"+tokenList[o].panel+"_apy").html(t.dp(4).toString(10)+"%")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))}function resetAllowanceTimer(e,t){var n=0;(0==t?$("#panel_"+e+"_wrap_approve_button"):$("#panel_"+e+"_stake_approve_button")).prop("disabled",!0);for(var o=0;o<tokenList.length;o++)if(parseInt(tokenList[o].panel)==e){n=o;break}null!=checkAllowanceTimer&&clearTimeout(checkAllowanceTimer),checkAllowanceTimer=window.setTimeout(function(){checkAllowance(n,t)},1e3)}async function checkAllowance(n,e){var o=tokenList[n].panel;t=0!=tokenList[n].tokenType?tokenList[n].underlying:(i=parseInt($("#panel_"+o+"_deposit_account").children("option:selected").val()),tokenList[n].underlying[i].token);tokenList[n].zToken;var t,a=padleftzero(userAddress.substring(2),64),i=padleftzero(tokenList[n].zToken.substring(2),64);0==e?(t=[{to:t,data:"0x"+contract_viewallowance+a+i},"latest"],await ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)),t=$("#panel_"+o+"_amount").val();if(0!=t.length&&(t=new BigNumber(t).times(new BigNumber(10).pow(tokenList[n].decimals)),!t.isNaN()&&0!=t.comparedTo(0)))if(e.comparedTo(t)<0){if(-1<$("#panel_"+o+"_wrap_approve_button").html().indexOf("UNLOCKING"))return null!=checkAllowanceTimer&&clearTimeout(checkAllowanceTimer),void(checkAllowanceTimer=window.setTimeout(function(){checkAllowance(n,!1)},1e4));$("#panel_"+o+"_wrap_approve_button").prop("disabled",!1),$("#panel_"+o+"_wrap_approve_button").html("APPROVE >")}else $("#panel_"+o+"_wrap_approve_button").prop("disabled",!1),$("#panel_"+o+"_amount").prop("disabled",!1),$("#panel_"+o+"_wrap_approve_button").html("WRAP >")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})):(i=[{to:stbbAddress,data:"0x"+contract_viewallowance+a+i},"latest"],await ethereum.request({method:"eth_call",params:i}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)),t=$("#panel_"+o+"_stake_amount").val();if(0!=t.length&&(t=new BigNumber(t).times(new BigNumber(10).pow(18)),!t.isNaN()&&0!=t.comparedTo(0)))if(e.comparedTo(t)<0){if(-1<$("#panel_"+o+"_stake_approve_button").html().indexOf("UNLOCKING"))return null!=checkAllowanceTimer&&clearTimeout(checkAllowanceTimer),void(checkAllowanceTimer=window.setTimeout(function(){checkAllowance(n,!0)},1e4));$("#panel_"+o+"_stake_approve_button").prop("disabled",!1),$("#panel_"+o+"_stake_approve_button").html("APPROVE >")}else $("#panel_"+o+"_stake_approve_button").prop("disabled",!1),$("#panel_"+o+"_stake_amount").prop("disabled",!1),$("#panel_"+o+"_stake_approve_button").html("STAKE >")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))}async function refreshTokenData(e){if(0==tokenList.length&&loadTokenList(),0==tokenRotation)null!=wrapTimer&&clearTimeout(wrapTimer),wrapTimer=window.setTimeout(function(){refreshTokenData(!0)},6e4),await getTokenPrices();else if(1==e)return null!=wrapTimer&&clearTimeout(wrapTimer),void(wrapTimer=window.setTimeout(function(){refreshTokenData(!0)},6e4));var i=tokenList[tokenRotation].panel,t=tokenList[tokenRotation].zToken,n=padleftzero(userAddress.substring(2),64);0!=tokenList[tokenRotation].tokenType&&1!=tokenList[tokenRotation].tokenType||getStrategyInterestRate(tokenRotation);var o,r,s=tokenRotation,c=3,e=[{to:t,data:"0x"+contract_balanceof+n},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);(o=(o=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(tokenList[s].decimals))).comparedTo("0.001")<0&&(c=10),$("#panel_"+i+"_walletbalance").html(o.dp(c).toString(10)+" "+tokenList[s].units)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),-1<tokenList[tokenRotation].tokenType&&(e=[{to:t,data:"0x"+contract_tokenprice},"latest"],r=new BigNumber(0),await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));$("#panel_"+i+"_price").html(e.toFormat(6)+" "+tokenList[s].underlyingUnits),r=e.times(o),$("#panel_"+i+"_value").html(r.dp(c).toString(10)+" "+tokenList[s].underlyingUnits)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})),0!=tokenList[tokenRotation].tokenType&&1!=tokenList[tokenRotation].tokenType||(e=[{to:t,data:"0x"+contract_view_withdrawtoken},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2).substring(0,64).toLowerCase(),n="NONE";if(0==tokenList[tokenRotation].tokenType){for(var o=0,a=0;a<tokenList[s].underlying.length;a++)if(t==padleftzero(tokenList[s].underlying[a].token.substring(2).toLowerCase(),64)){o=a,n=tokenList[s].underlying[a].symbol;break}o!=parseInt($("#panel_"+i+"_deposit_account").children("option:selected").val())&&"---"==$("#panel_"+i+"_withdrawtoken").html()&&$("#panel_"+i+"_deposit_account").val(o)}else if(1==tokenList[tokenRotation].tokenType)for(a=0;a<tokenList[s].withdrawTokens.length;a++)if(t==padleftzero(tokenList[s].withdrawTokens[a].token.substring(2).toLowerCase(),64)){n=tokenList[s].withdrawTokens[a].symbol,"STATIC"==tokenList[tokenRotation].underlyingUnits&&(n="STATIC"),"zstb-ETH"==tokenList[tokenRotation].units&&(n="ETH");break}$("#panel_"+i+"_withdrawtoken").html(n),"NONE"!=n&&$("#panel_"+i+"_value").html(r.dp(c).toString(10)+" "+n)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}));var a=new BigNumber(0);e=[{to:t,data:"0x"+contract_gettotalstbb},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)),t=10;0<=(e=e.div(new BigNumber(10).pow(18))).comparedTo(1)&&(t=2),$("#panel_"+i+"_stbb_total").html(e.dp(t).toString(10)+" STBB"),a=e.times(stbbPrice)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=[{to:t,data:"0x"+contract_balanceofstbb+n},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)),t=10;0<=(e=e.div(new BigNumber(10).pow(18))).comparedTo(1)&&(t=2),$("#panel_"+i+"_stbb_balance").html(e.dp(t).toString(10)+" STBB")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=[{to:t,data:"0x"+contract_rewardearned+n},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2),e=new BigNumber("0x"+e.substring(0,64));0<e.comparedTo(0)?$("#panel_"+i+"_claim_stake_button").show():$("#panel_"+i+"_claim_stake_button").hide(),e=e.div(new BigNumber(10).pow(18)),$("#panel_"+i+"_wbnb_balance").html(e.dp(8).toString(10)+" WBNB")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=[{to:t,data:"0x"+contract_rewardrate},"latest"],await ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),n=new BigNumber("0x"+t.substring(0,64));n=(n=n.div(new BigNumber(10).pow(18))).times(bnbPrice),0==a.comparedTo(0)&&(a=new BigNumber(1));e=(n=(n=n.div(a)).times(86400).times(365)).times(100),t=2;e.comparedTo("0.01")<0&&(t=8),$("#panel_"+i+"_stbb_apr").html(e.dp(t).toString(10)+"%"),apy=n.div(52).plus(1).pow(52).minus(1).times(100),0<apy.comparedTo("1000000")?$("#panel_"+i+"_stbb_apy").html("> 1000000%"):$("#panel_"+i+"_stbb_apy").html(apy.dp(t).toString(10)+"%")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),++tokenRotation>=tokenList.length?tokenRotation=0:window.setTimeout(function(){refreshTokenData(!1)},500)}async function getTokenPrices(){var e=[{to:bnbChainLinkOracle,data:"0x"+contract_latestAnswer},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(8));bnbPrice=e}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=[{to:stbbLPAddress,data:"0x"+contract_getreserves},"latest"],ethereum.request({method:"eth_call",params:e}).then(e=>{var e=e.substring(2),o=new BigNumber("0x"+e.substring(0,64)),a=new BigNumber("0x"+e.substring(64,128)),e=[{to:stbbLPAddress,data:"0x"+contract_token0address},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2).substring(0,64).toLowerCase(),n=padleftzero(wbnbAddress.substring(2),64).toLowerCase(),e=[{to:stbbLPAddress,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);new BigNumber("0x"+e.substring(0,64)).comparedTo(0)<=0||bnbPrice.comparedTo(0)<=0||(stbbPrice=t==n?(o=o.div(new BigNumber(10).pow(18)).times(bnbPrice)).div(a.div(new BigNumber(10).pow(18))):(a=a.div(new BigNumber(10).pow(18)).times(bnbPrice)).div(o.div(new BigNumber(10).pow(18))))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function unlockTokenAmount(e,t){var n=t,o=padleftzero((o=tokenList[e].zToken.substring(2)).toLowerCase(),64),t=padleftzero(t=n.toString(16),64);sendETHTransaction([{to:0!=tokenList[e].tokenType?tokenList[e].underlying:(n=parseInt($("#panel_"+panelid+"_deposit_account").children("option:selected").val()),tokenList[e].underlying[n].token),from:userAddress,data:"0x"+contract_approve+o+t}],function(){window.setTimeout(function(){checkAllowance(e,!1)},2e4),$("#panel_"+panel_id+"_wrap_approve_button").html("UNLOCKING..."),$("#panel_"+panel_id+"_amount").prop("disabled",!0)})}function unlockStakeWrapper(e,t){var n=t,t=padleftzero((t=tokenList[e].zToken.substring(2)).toLowerCase(),64),n=padleftzero(n=n.toString(16),64);sendETHTransaction([{to:stbbAddress,from:userAddress,data:"0x"+contract_approve+t+n}],function(){window.setTimeout(function(){checkAllowance(e,!0)},2e4),$("#panel_"+panel_id+"_stake_approve_button").html("UNLOCKING..."),$("#panel_"+panel_id+"_stake_amount").prop("disabled",!0)})}function selectMaxWrap(n){for(var o=0,e=0;e<tokenList.length;e++)if(parseInt(tokenList[e].panel)==n){o=e;break}var t=padleftzero(userAddress.substring(2),64),a=-1,t=[{to:0!=tokenList[o].tokenType?tokenList[o].underlying:(a=parseInt($("#panel_"+n+"_deposit_account").children("option:selected").val()),tokenList[o].underlying[a].token),data:"0x"+contract_balanceof+t},"latest"];ethereum.request({method:"eth_call",params:t}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)),t=tokenList[o].decimals;0==tokenList[o].tokenType?t=tokenList[o].underlying[a].decimals:1==tokenList[o].tokenType&&(t=tokenList[o].withdrawTokens[0].decimals),e=e.div(new BigNumber(10).pow(t)),$("#panel_"+n+"_amount").val(e.toString(10)),resetAllowanceTimer(n,!1)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function selectMaxStakeIn(t){for(var e=0;e<tokenList.length;e++)if(parseInt(tokenList[e].panel)==t){0;break}var n=padleftzero(userAddress.substring(2),64),n=[{to:stbbAddress,data:"0x"+contract_balanceof+n},"latest"];ethereum.request({method:"eth_call",params:n}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));$("#panel_"+t+"_stake_amount").val(e.toString(10)),resetAllowanceTimer(t,!0)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function selectMaxUnwrap(t){for(var n=0,e=0;e<tokenList.length;e++)if(parseInt(tokenList[e].panel)==t){n=e;break}var o=padleftzero(userAddress.substring(2),64),o=[{to:tokenList[n].zToken,data:"0x"+contract_balanceof+o},"latest"];ethereum.request({method:"eth_call",params:o}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(tokenList[n].decimals));$("#panel_"+t+"_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function selectMaxStakeOut(t){for(var e=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==t){e=n;break}var o=padleftzero(userAddress.substring(2),64),o=[{to:tokenList[e].zToken,data:"0x"+contract_balanceofstbb+o},"latest"];ethereum.request({method:"eth_call",params:o}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));$("#panel_"+t+"_stake_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function wrap(e){for(var t=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==e){t=n;break}var o,a,i,r=new BigNumber($("#panel_"+e+"_amount").val());r.isNaN()||r.comparedTo(0)<=0||(o=tokenList[t].decimals,a=-1,0==tokenList[t].tokenType?(a=parseInt($("#panel_"+e+"_deposit_account").children("option:selected").val()),o=tokenList[t].underlying[a].decimals):1==tokenList[t].tokenType&&(o=tokenList[t].withdrawTokens[0].decimals),r=r.times(new BigNumber(10).pow(o)),-1<$("#panel_"+e+"_wrap_approve_button").html().indexOf("APPROVE")?unlockTokenAmount(t,r):(r=padleftzero(r=r.toString(16),64),i=0!=tokenList[t].tokenType?"0x"+contract_deposit+r:(i=padleftzero(i=(a=new BigNumber($("#panel_"+e+"_deposit_account").children("option:selected").val())).toString(16),64),"0x"+contract_deposit_multi+r+i),sendETHTransaction([{to:tokenList[t].zToken,from:userAddress,data:i}],function(){$("#panel_"+e+"_amount").val(0)})))}function stake(e){for(var t=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==e){t=n;break}var o=new BigNumber($("#panel_"+e+"_stake_amount").val());o.isNaN()||o.comparedTo(0)<=0||(o=o.times(new BigNumber(10).pow(18)),-1<$("#panel_"+e+"_stake_approve_button").html().indexOf("APPROVE")?unlockStakeWrapper(t,o):(o=padleftzero(o=o.toString(16),64),o="0x"+contract_stake+o,sendETHTransaction([{to:tokenList[t].zToken,from:userAddress,data:o}],function(){$("#panel_"+e+"_stake_amount").val(0)})))}async function unwrap(e){for(var t=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==e){t=n;break}var o=new BigNumber($("#panel_"+e+"_amount").val());o.isNaN()||o.comparedTo(0)<=0||(o=padleftzero(o=(o=o.times(new BigNumber(10).pow(tokenList[t].decimals))).toString(16),64),tokenList[t].units,sendETHTransaction([{to:tokenList[t].zToken,from:userAddress,data:"0x"+contract_redeem+o}],null))}function unstake(e){for(var t=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==e){t=n;break}var o=new BigNumber($("#panel_"+e+"_stake_amount").val());o.isNaN()||o.comparedTo(0)<=0||(o=padleftzero(o=(o=o.times(new BigNumber(10).pow(18))).toString(16),64),sendETHTransaction([{to:tokenList[t].zToken,from:userAddress,data:"0x"+contract_exitstake+o}],null))}function claimReward(e){for(var t=0,n=0;n<tokenList.length;n++)if(parseInt(tokenList[n].panel)==e){t=n;break}sendETHTransaction([{to:tokenList[t].zToken,from:userAddress,data:"0x"+contract_claimreward}],null)}async function sendETHTransaction(e,t){var n=await ethereum.request({method:"eth_chainId"});0==(n=new BigNumber("0x"+n.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the BSC network, please switch it in your MetaMask UI.")}function setCookie(e,t,n){var o,a="";0<n&&((o=new Date).setTime(o.getTime()+24*n*60*60*1e3),a="; expires="+o.toUTCString()),document.cookie=e+"="+(t||"")+a+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}