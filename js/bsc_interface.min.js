var poolTimer,detectMetamask=!1,metamaskConnected=!1,userAddress="",stbbPrice=new BigNumber(0),bnbPrice=new BigNumber(0),circulatingSupply=new BigNumber(0),TVL=new BigNumber(0);const refreshFrequency=new BigNumber(60);var airdropInfo={},operatorAddress="0x9F37068a58DE8a2adfaECA4Eb01794E23868365F",communityFundAddress="0x4589Af2Ce85a6e7c20cc47F6A3400c7c9e886Cc2",wbnbAddress="0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",stbbAddress="0xE1316066af35fbfF54f870eA6d1468255602a696",merkleAddress="0xea751572184ca6244b6ECcC1830c1830A12dA6C6",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_isclaimed="9e34070f",contract_merkleclaim="2e7ba6ef",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_tokenprice="7b1b1de6",contract_deposit="e2bbb158",contract_staking_deposit="a694fc3a",contract_exit="2af9cc41",contract_staking_exit="7f8661a1",contract_claimReward="1c4b774b",contract_staking_claimReward="3d18b912",contract_poolBalance="351e7cb3",contract_staking_poolBalance="68abb5e0",contract_poolSize="dd034779",contract_staking_poolSize="4ec18db9",contract_rewardEarned="cdfa2c36",contract_staking_rewardEarned="008cc262",contract_rewardRate="cea01962",contract_staking_rewardRate="7b0a47ee",contract_circsupply="9358928b",contract_claimTreasury="379607f5",contract_treasuryBalance="9105d748",contract_mint_week="19597a56",contract_last_refresh="6d5f0c66",contract_period_end="0962c4f9",contract_rebalance_pools="882229f3",contract_getPrice="41976e09",targetNetwork=56,poolList=[],pricesList=[],poolRotation=0;function loadPoolList(){poolList.push({poolID:7,poolToken:"0x7cC127d3e1E9Ea3ABb3692F747556Aec9a51e9f9",units:"LP",decimals:18,panel:"7",proxy:!1}),poolList.push({poolID:1,poolToken:"0x62b39BEB9e784e957CD112706919a9F6bACE0Cc5",units:"zsb-USD",decimals:18,panel:"1",proxy:!0,underlyingUnits:"USD",underlyingInterestMethod:"strategy",underlyingInterestData:15478143,usdPrice:1,checkpointPrice:"1034044605668537011"}),poolList.push({poolID:15,poolToken:"0xf988eB0889bA049145c09392D1C3a89Db8dEB930",units:"zsb-AUSDLP",decimals:18,panel:"15",proxy:!0,underlyingUnits:"AUSDLP",underlyingInterestMethod:"strategy",underlyingInterestData:17803137,usdPrice:1,checkpointPrice:"1000000000000000000"}),poolList.push({poolID:17,poolToken:"0xCeef19C73D94EeA3EEc4207120aECb0BE3B08554",units:"zsb-USDDLPv2",decimals:18,panel:"17",proxy:!0,underlyingUnits:"USDDLPv2",underlyingInterestMethod:"strategy",underlyingInterestData:18358388,usdPrice:1,checkpointPrice:"1000000000000000000"}),matchPoolToPrices()}function loadInactivePoolList(){poolList.push({poolID:16,poolToken:"0xdf7c0c2Ed48B1D3B5a60d1cF63a22Fb3dF402D94",units:"zsb-USDDLP",decimals:18,panel:"16",proxy:!0,underlyingUnits:"USDDLP",underlyingInterestMethod:"none",underlyingInterestData:17799417,usdPrice:1,checkpointPrice:"1000000000000000000"}),poolList.push({poolID:14,poolToken:"0x1E73360Cc3b761CC03a2e20744F6A99F25cb55c5",units:"zsb-oneDODO",decimals:18,panel:"14",proxy:!0,underlyingUnits:"oneDODO",underlyingInterestMethod:"none",underlyingInterestData:15478143,usdPrice:1,checkpointPrice:"1015173573718693798"}),poolList.push({poolID:13,poolToken:"0x37fF51b19B51a8dd659Ac0F1093ebEa32F4c2933",units:"zsb-STATIC",decimals:18,panel:"13",proxy:!0,underlyingUnits:"STATIC",underlyingInterestMethod:"none",underlyingInterestData:14848858,usdPrice:1,checkpointPrice:"423802727775045314"}),poolList.push({poolID:4,poolToken:"0xD256E756BCd536b0C6c6630C5b31Da5ecF21568A",units:"zsb-ETH",decimals:18,panel:"4",proxy:!0,underlyingUnits:"ETH",underlyingInterestMethod:"none",underlyingInterestData:8977270,usdPrice:1,checkpointPrice:"1180605150748174881"}),poolList.push({poolID:8,poolToken:"0x507Cd42d23853463F1Ec7bec88100e22c125C181",units:"zsb-USDG",decimals:18,panel:"8",proxy:!0,underlyingUnits:"USDG",underlyingInterestMethod:"none",underlyingInterestData:8977270,usdPrice:1,checkpointPrice:"1242617112680840840"}),poolList.push({poolID:10,poolToken:"0xbd4666F561632bA33680cD24adf2c4C12FF303B4",units:"zsb-UST",decimals:18,panel:"10",proxy:!0,underlyingUnits:"UST",underlyingInterestMethod:"none",underlyingInterestData:8977270,usdPrice:1,checkpointPrice:"1040165749254577910"}),poolList.push({poolID:11,poolToken:"0xaE0a2e71c9Bf3596511aE76164368954D900623c",units:"zsb-DOLLY",decimals:18,panel:"11",proxy:!0,underlyingUnits:"DOLLY",underlyingInterestMethod:"none",underlyingInterestData:8977270,usdPrice:1,checkpointPrice:"495390441631572417670"}),poolList.push({poolID:6,poolToken:"0x755966B34135Cd34Dbc880fCF82C751f26872390",units:"zsb-BTC",decimals:18,panel:"6",proxy:!0,underlyingUnits:"BTC",underlyingInterestMethod:"none",underlyingInterestData:6708265,usdPrice:1}),poolList.push({poolID:12,poolToken:"0xbdF5A2d30C69bD2557e9dAE4a30e5A426141293E",units:"zsb-IRON2",decimals:18,panel:"12",proxy:!0,underlyingUnits:"IRON",underlyingInterestMethod:"none",underlyingInterestData:7354072,usdPrice:1}),poolList.push({poolID:9,poolToken:"0x31e0c311EE4cECe47729e295ED6108372C5f4e42",units:"zsb-MBDO",decimals:18,panel:"9",proxy:!0,underlyingUnits:"MBDO",underlyingInterestMethod:"none",underlyingInterestData:6964349,usdPrice:1}),poolList.push({poolID:2,poolToken:"0xfF756ceb8aca17C302E33cfa9b368F8002926453",units:"zsb-IRON",decimals:18,panel:"2",proxy:!0,underlyingUnits:"IRON",underlyingInterestMethod:"none",underlyingInterestData:6307517,usdPrice:1}),poolList.push({poolID:0,poolToken:"0x95dCb8a62d2d8dc51dcef3E2f0Ff376583A14b9C",units:"LP",decimals:18,panel:"0",proxy:!1}),poolList.push({poolID:5,poolToken:"0x76F4bFB6C8ea2397bB5D7c2AaF49846F9E34c6A1",units:"zsb-MDO",decimals:18,panel:"5",proxy:!0,underlyingUnits:"MDO",underlyingInterestMethod:"none",underlyingInterestData:6307517,usdPrice:1}),poolList.push({poolID:3,poolToken:"0xFAAC2Fe54935029B9b872d5a4020493A21dC020f",units:"zsb-BDO",decimals:18,panel:"3",proxy:!0,underlyingUnits:"BDO",underlyingInterestMethod:"none",underlyingInterestData:6307517,usdPrice:1}),matchPoolToPrices()}function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}$(window).on("load",function(){checkMetaMaskExist()});async function enableMetaMask(){var e,t=await ethereum.request({method:"eth_requestAccounts"});t&&(e=await ethereum.request({method:"eth_chainId"}),0==(e=new BigNumber("0x"+e.substring(2))).comparedTo(targetNetwork)?(userAddress=t[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),getPrices(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})):0==e.comparedTo(1)?window.location.replace("../"):alert("This application requires the BSC network, please switch it in your MetaMask UI."))}function metamaskButtonClick(){0==detectMetamask?window.open("https://metamask.io/","_blank"):1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function checkRebalanceState(){var t=0,o=Math.floor((new Date).getTime()/1e3),e=[{to:operatorAddress,data:"0x"+contract_last_refresh},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);new BigNumber("0x"+e.substring(0,64)).plus(refreshFrequency).comparedTo(o)<=0&&(t=1),0==t?"none"!=$("#pool_action").css("display")&&$("#pool_action").fadeOut(1e3):1==t&&($("#pool_action").html("REBALANCE STBB REWARDS >"),"none"==$("#pool_action").css("display")&&$("#pool_action").fadeIn(1e3))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function performRebalance(){sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+contract_rebalance_pools}],function(){$("#pool_action").fadeOut(1e3)})}function showInactivePools(){$("#inactive_pool_controller").html("INACTIVE POOLS"),$("#inactive_pool_container").show(),0==poolRotation&&0<TVL.comparedTo(0)?(poolRotation=poolList.length,loadInactivePoolList(),clearTimeout(poolTimer),poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4),refreshPoolData(!1)):loadInactivePoolList()}function getPrices(){var n=!1;0==poolList.length&&(n=!0,loadPoolList());$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum,bitcoin,binancecoin,chargedefi-static&vs_currencies=usd",function(e){var t,o;e&&(bnbPrice=new BigNumber(e.binancecoin.usd),t=new BigNumber(e.ethereum.usd),o=new BigNumber(e["chargedefi-static"].usd),e=new BigNumber(e.bitcoin.usd),(pricesList={}).ETH=new BigNumber(t),pricesList.BNB=new BigNumber(bnbPrice),pricesList.BTC=new BigNumber(e),pricesList.STATIC=new BigNumber(o),matchPoolToPrices(),1==n&&refreshPoolData(!0))})}function matchPoolToPrices(){if(0!=poolList.length)for(var e=0;e<poolList.length;e++)"zsb-ETH"==poolList[e].units?poolList[e].usdPrice=pricesList.ETH:"zsb-STATIC"==poolList[e].units?poolList[e].usdPrice=pricesList.STATIC:"zsb-BTC"==poolList[e].units&&(poolList[e].usdPrice=pricesList.BTC)}function runCountDownTimer(){var e,t,o,n,r=Math.floor((new Date).getTime()/1e3),i=1617922800;r<i?(e=i-r,t="HOURS",o="MINUTES",n="SECONDS",1==(i=Math.floor(e/3600))&&(t="HOURS"),1==(r=Math.floor(e%3600/60))&&(o="MINUTE"),1==(e=Math.floor(e%60))&&(n="SECOND"),t=i+" "+t+", ",o=r+" "+o+", ",n=e+" "+n,i<1&&(t="",r<1&&(o="")),$("#countdown_timer").html(t+o+n+"<br>"),window.setTimeout(runCountDownTimer,1e3)):$("#countdown_timer").html("MOMENTARILY<br>")}function checkMerkleAirdrop(){$.getJSON("stbb_airdrop_merkle.json",function(o){$.each(o.claims,function(e,t){o.claims[e.toLowerCase()]||(o.claims[e.toLowerCase()]=t,delete o.claims[e])});var e,t=userAddress.toLowerCase();o.claims[t]&&(e=padleftzero(e=new BigNumber(o.claims[t].index).toString(16),64),e=[{to:merkleAddress,data:"0x"+contract_isclaimed+e},"latest"],ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);0==new BigNumber("0x"+e.substring(0,64)).comparedTo(0)&&(airdropInfo.index=o.claims[t].index,airdropInfo.amount=new BigNumber("0x"+o.claims[t].amount),airdropInfo.proof=o.claims[t].proof,$("#airdrop_action").html("CLAIM "+airdropInfo.amount.div(new BigNumber(10).pow(18)).dp(2)+" STBB FROM STABILIZE BSC AIRDROP NOW >"),$("#airdrop_action").css("display","inline"))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))})}function getSTBBAirdrop(){if(airdropInfo){for(var e=padleftzero(e=airdropInfo.index.toString(16),64),t=padleftzero(userAddress.substring(2),64),o=padleftzero(o=airdropInfo.amount.toString(16),64),n=padleftzero(n=new BigNumber(128).toString(16),64),r=padleftzero(r=new BigNumber(airdropInfo.proof.length).toString(16),64),i="",a=0;a<airdropInfo.proof.length;a++)i+=padrightzero(airdropInfo.proof[a].substring(2),64);sendETHTransaction([{to:merkleAddress,from:userAddress,data:"0x"+contract_merkleclaim+e+t+o+n+r+i}],function(){$("#airdrop_action").css("display","none")})}}function getCirculatingSupply(){var e=[{to:stbbAddress,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var e=e.substring(2),o=(o=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18)),e=padleftzero(operatorAddress.substring(2),64),e=[{to:stbbAddress,data:"0x"+contract_balanceof+e},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var e=e.substring(2),t=(t=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18)),e=padleftzero(communityFundAddress.substring(2),64),e=[{to:stbbAddress,data:"0x"+contract_balanceof+e},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18)),e=o.minus(t).minus(e);$("#circ_supply").html(e.toFormat(2))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function calculateUnderlyingInterest(e){var n,r,t,o=poolList[e].underlyingInterestMethod,i=poolList[e].underlyingInterestData,a=poolList[e].panel;"strategy"==o?(n=new BigNumber(i),poolList[e].checkpointPrice&&(r=poolList[e].checkpointPrice,t=poolList[e].poolToken,ethereum.request({method:"eth_blockNumber",params:[]}).then(e=>{var e=e.substring(2),o=new BigNumber("0x"+e.substring(0,64));o.minus(28800).comparedTo(n)<0||(e=[{to:t,data:"0x"+contract_tokenprice},"0x"+o.toString(16)],ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64)).div(r).minus(1),t=o.minus(n).div(28800);0==t.comparedTo(0)&&(t=new BigNumber(1));t=e.div(t).times(100).times(365);0<t.comparedTo(.001)?$("#panel_"+a+"_interest_link").html(t.dp(2).toString(10)+"% &#9654;"):$("#panel_"+a+"_interest_link").html("N/A &#9654;")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))):"none"==o&&$("#panel_"+a+"_interest_link").html("0% &#9654;")}async function refreshPoolData(e){if(checkRebalanceState(),0==poolRotation)getCirculatingSupply(),TVL=new BigNumber(0),null!=poolTimer&&clearTimeout(poolTimer),poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4);else if(1==e)return null!=poolTimer&&clearTimeout(poolTimer),void(poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4));var n=poolList[poolRotation].panel;if("none"==$("#panel_"+n+"_action_buttons").css("display")&&"none"==$("#panel_"+n+"_unlock_button").css("display")||1==$("#panel_"+n+"_unlock_inner_button").prop("disabled")){var e=poolList[poolRotation].poolToken,t=padleftzero(userAddress.substring(2),64),o=padleftzero(operatorAddress.substring(2),64);const l=[{to:e,data:"0x"+contract_viewallowance+t+o},"latest"];ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2);new BigNumber("0x"+e.substring(0,64)).comparedTo(1)<0?$("#panel_"+n+"_unlock_button").show():($("#panel_"+n+"_unlock_button").hide(),$("#panel_"+n+"_action_buttons").show())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}var r,i,a=poolRotation,o=new BigNumber(poolList[a].poolID),s=padleftzero(s=o.toString(16),64),l=[{to:operatorAddress,data:"0x"+contract_poolSize+s},"latest"];await ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2);r=(r=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[a].decimals)),i=2,r.comparedTo(.01)<0&&(i=8),$("#panel_"+n+"_poolsize").html(r.dp(i).toString(10)+" "+poolList[a].units)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))});var c,t=padleftzero(userAddress.substring(2),64);l=[{to:operatorAddress,data:"0x"+contract_poolBalance+s+t},"latest"],await ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2);c=(c=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[a].decimals)),$("#panel_"+n+"_mybalance").html(c.dp(i).toString(10)+" "+poolList[a].units),c.comparedTo(0)<=0?"none"!=$("#panel_"+n+"_withdraw_button").css("display")&&($("#panel_"+n+"_withdraw_button").hide(),$("#panel_"+n+"_claim_button").hide()):"none"==$("#panel_"+n+"_withdraw_button").css("display")&&($("#panel_"+n+"_withdraw_button").show(),$("#panel_"+n+"_claim_button").show())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))});var d=new BigNumber(1);1==poolList[a].proxy&&(l=[{to:poolList[a].poolToken,data:"0x"+contract_tokenprice},"latest"],await ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2);d=(d=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));e=c.times(d);$("#panel_"+n+"_value").html(e.dp(i).toString(10)+" "+poolList[a].underlyingUnits);e=r.times(d).times(poolList[a].usdPrice);console.log("Pool "+a+" usd value: "+e.dp(2).toString(10)),TVL=TVL.plus(e),(a+1>=poolList.length||0==a)&&$("#tvl").html("$"+TVL.toFormat(2))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})),l=[{to:operatorAddress,data:"0x"+contract_rewardEarned+s+t},"latest"],await ethereum.request({method:"eth_call",params:l}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));$("#panel_"+n+"_rewardbalance").html(e.dp(4).toString(10)+" STBB"),l=[{to:operatorAddress,data:"0x"+contract_rewardRate+s},"latest"]}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),await ethereum.request({method:"eth_call",params:l}).then(e=>{var t=e.substring(2),o=new BigNumber("0x"+t.substring(0,64));"LP"!=poolList[a].units?(o=(o=o.div(new BigNumber(10).pow(18))).times(stbbPrice),0<r.comparedTo(0)&&(1==poolList[a].proxy&&0==(r=r.times(poolList[a].usdPrice).times(d)).comparedTo(0)&&(r=new BigNumber(1)),0==poolList[a].proxy&&(TVL=TVL.plus(r)),o=o.div(r)),e=2,(t=(t=o.times(new BigNumber(86400))).times(100)).comparedTo("0.01")<0&&(e=8),$("#panel_"+n+"_dpy").html(t.dp(e).toString(10)+"%"),e=2,(t=t.times(365)).comparedTo("0.01")<0&&(e=8),$("#panel_"+n+"_apr").html(t.dp(e).toString(10)+"%"),e=2,(t=(t=t.div(100)).div(52).plus(1).pow(52).minus(1).times(100)).comparedTo("0.01")<0&&(e=8),e=t.dp(e).toString(10)+"%",0<t.comparedTo("1000000")&&(e="> 1000000%"),1==poolList[a].proxy?(t="---",0<$("#panel_"+n+"_interest_link").length&&(t=$("#panel_"+n+"_interest_link").html()),$("#panel_"+n+"_apy").html(e+" + <a id='panel_"+n+"_interest_link' href='wrap/' style='color: rgb(40,200,40);'>"+t+"</a>"),calculateUnderlyingInterest(a)):$("#panel_"+n+"_apy").html(e),a+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getPrices(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)):getLPTokenDPY(a,r,o)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function getLPTokenDPY(l,c,d){var e=[{to:poolList[l].poolToken,data:"0x"+contract_getreserves},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var e=e.substring(2),a=new BigNumber("0x"+e.substring(0,64)),s=new BigNumber("0x"+e.substring(64,128)),e=[{to:poolList[l].poolToken,data:"0x"+contract_token0address},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var r=e.substring(2).substring(0,64).toLowerCase(),i=padleftzero(wbnbAddress.substring(2),64).toLowerCase(),e=[{to:poolList[l].poolToken,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var t,o=e.substring(2),n=new BigNumber("0x"+o.substring(0,64));bnbPrice.comparedTo(0)<=0||(e=new BigNumber(1),0<n.comparedTo(0)&&(o=0,r==i?(a=a.div(new BigNumber(10).pow(18)).times(bnbPrice),0==l&&(stbbPrice=a.div(s.div(new BigNumber(10).pow(18))),$("#stbb_price").html("$"+stbbPrice.toFormat(2))),s=new BigNumber(a)):(s=s.div(new BigNumber(10).pow(18)).times(bnbPrice),0==l&&(stbbPrice=s.div(a.div(new BigNumber(10).pow(18))),$("#stbb_price").html("$"+stbbPrice.toFormat(2))),a=new BigNumber(s)),o=a.plus(s),n=n.div(new BigNumber(10).pow(18)),t=c.div(n),(e=o.times(t)).comparedTo(0)<=0?e=1:(console.log("LP Pool usd value: "+e.dp(2).toString(10)),TVL=TVL.plus(e))),t=(t=(d=(d=(d=d.div(new BigNumber(10).pow(18))).times(stbbPrice)).div(e)).times(new BigNumber(86400))).times(100),$("#panel_"+poolList[l].panel+"_dpy").html(t.dp(2).toString(10)+"%"),e=t.times(365),$("#panel_"+poolList[l].panel+"_apr").html(e.dp(2).toString(10)+"%"),e=(t=(t=e.div(100)).div(52).plus(1).pow(52).minus(1).times(100)).dp(2).toString(10)+"%",0<t.comparedTo("1000000")&&(e="> 1000000%"),$("#panel_"+poolList[l].panel+"_apy").html(e),l+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getPrices(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function unlockToken(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var n=new BigNumber(2).pow(256).minus(1),r=padleftzero((r=operatorAddress.substring(2)).toLowerCase(),64),n=padleftzero(n=n.toString(16),64);sendETHTransaction([{to:poolList[t].poolToken,gas:"0x186A0",from:userAddress,data:"0x"+contract_approve+r+n}],function(){$("#panel_"+e+"_unlock_inner_button").prop("disabled",!0),$("#panel_"+e+"_unlock_inner_button").html("UNLOCKING "+poolList[t].units)})}function selectMaxOut(t){for(var o=0,e=0;e<poolList.length;e++)if(parseInt(poolList[e].panel)==t){o=e;break}var n=padleftzero(n=new BigNumber(poolList[o].poolID).toString(16),64),r=padleftzero(userAddress.substring(2),64),r=[{to:operatorAddress,data:"0x"+contract_poolBalance+n+r},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[o].decimals));$("#panel_"+t+"_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function selectMaxIn(t){for(var o=0,e=0;e<poolList.length;e++)if(parseInt(poolList[e].panel)==t){o=e;break}var n=padleftzero(userAddress.substring(2),64),n=[{to:poolList[o].poolToken,data:"0x"+contract_balanceof+n},"latest"];ethereum.request({method:"eth_call",params:n}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[o].decimals));$("#panel_"+t+"_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function deposit(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var n,r=new BigNumber($("#panel_"+e+"_amount").val());r.isNaN()||r.comparedTo(0)<=0||(n=padleftzero(n=(r=r.times(new BigNumber(10).pow(poolList[t].decimals))).toString(16),64),r=padleftzero(r=new BigNumber(poolList[t].poolID).toString(16),64),sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+contract_deposit+r+n}],null))}function withdraw(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var n,r=new BigNumber($("#panel_"+e+"_amount").val());r.isNaN()||r.comparedTo(0)<=0||(n=padleftzero(n=(r=r.times(new BigNumber(10).pow(poolList[t].decimals))).toString(16),64),r=padleftzero(r=new BigNumber(poolList[t].poolID).toString(16),64),sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+contract_exit+r+n}],null))}function claimReward(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var n=padleftzero(n=new BigNumber(poolList[t].poolID).toString(16),64);sendETHTransaction([{to:operatorAddress,gas:"0x30D40",from:userAddress,data:"0x"+contract_claimReward+n}],null)}async function sendETHTransaction(e,t){var o=await ethereum.request({method:"eth_chainId"});0==(o=new BigNumber("0x"+o.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the BSC network, please switch it in your MetaMask UI.")}function setCookie(e,t,o){var n,r="";0<o&&((n=new Date).setTime(n.getTime()+24*o*60*60*1e3),r="; expires="+n.toUTCString()),document.cookie=e+"="+(t||"")+r+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}