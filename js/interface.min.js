var poolTimer,detectMetamask=!1,metamaskConnected=!1,userAddress="",stbzPrice=new BigNumber(0),ethPrice=new BigNumber(0),TVL=new BigNumber(0),operatorAddress="0xCE820d0E671d30f4ac0a5007346c0E85fE12039F",wethAddress="0x82aF49447D8a07e3bd95BD0d56f35241523fBab1",stbzAddress="0x2C110867CA90e43D372C1C2E92990B00EA32818b",wethSTBZPool="0x835a1BcA3e5da0752dD73BD3f89AC0357fD34943",buybackAddress="0xBEDD44967d49A70680FD50bD8049273ab225d590",contract_viewallowance="dd62ed3e",contract_approve="095ea7b3",contract_totalsupply="18160ddd",contract_balanceof="70a08231",contract_getreserves="0902f1ac",contract_token0address="0dfe1681",contract_poolvest="ce6c2a6f",contract_tokenprice="7b1b1de6",contract_deposit="e2bbb158",contract_staking_deposit="a694fc3a",contract_exit="2af9cc41",contract_withdraw_noclaim="441a3e70",contract_staking_exit="7f8661a1",contract_claimReward="1c4b774b",contract_staking_claimReward="3d18b912",contract_poolBalance="351e7cb3",contract_staking_poolBalance="68abb5e0",contract_poolSize="dd034779",contract_staking_poolSize="4ec18db9",contract_rewardEarned="cdfa2c36",contract_staking_rewardEarned="008cc262",contract_rewardRate="cea01962",contract_staking_rewardRate="7b0a47ee",contract_circsupply="9358928b",contract_claimTreasury="379607f5",contract_treasuryBalance="9105d748",contract_mint_week="19597a56",contract_last_oracle="0c89a0f0",contract_period_end="0962c4f9",contract_rebalance_pools="882229f3",targetNetwork=42161,poolList=[],pricesList=[],treasuryList=[],poolRotation=0;function loadPoolList(){poolList.push({poolID:0,poolToken:"0x835a1BcA3e5da0752dD73BD3f89AC0357fD34943",units:"LP",decimals:18,panel:"0",proxy:!1}),poolList.push({poolID:5,poolToken:"0x3B308089b9271a5B90Bf8C8B6959C2745C386CD5",units:"zs-imUSDC",decimals:18,panel:"5",proxy:!0,underlyingUnits:"USDC",usdPrice:1,underlyingInterestMethod:"checkpoint",checkpointTime:new BigNumber(1642106690),checkpointPrice:new BigNumber(1)}),poolList.push({poolID:6,poolToken:"0x8ebF70E10aDF6933b7cDD138FEfB0C3fD3Ae586A",units:"zs-imWETH",decimals:18,panel:"6",proxy:!0,underlyingUnits:"WETH",usdPrice:1,underlyingInterestMethod:"checkpoint",checkpointTime:new BigNumber(1642461206),checkpointPrice:new BigNumber(1)}),poolList.push({poolID:4,poolToken:"0xA4373B079cf2689094C4cCE148aa04948666A361",units:"zs-fsGLP",decimals:18,panel:"4",proxy:!0,underlyingUnits:"GLP",usdPrice:1.25,underlyingInterestMethod:"checkpoint",checkpointTime:new BigNumber(1637655020),checkpointPrice:new BigNumber(1.03204)}),poolList.push({poolID:1,poolToken:"0x1017E68aEcB51Fb46093f064Fa7c177757B7125E",units:"zs-MIM",decimals:18,panel:"1",proxy:!0,underlyingUnits:"MIM",usdPrice:1,underlyingInterestMethod:"checkpoint",checkpointTime:new BigNumber(1637655020),checkpointPrice:new BigNumber(1.012268)}),poolList.push({poolID:2,poolToken:"0xC6fEe0D765dd0E14EF55f6eBE82A5780bbb3735f",units:"zs-2CRV",decimals:18,panel:"2",proxy:!0,underlyingUnits:"2CRV",usdPrice:1,underlyingInterestMethod:"checkpoint",checkpointTime:new BigNumber(1637655020),checkpointPrice:new BigNumber(1.004149)}),matchPoolToPrices()}function loadInactivePoolList(){poolList.push({poolID:3,poolToken:"0x75A2a05B8A21568f5e052b6bbCfB799624Fb2d8E",units:"zs-WETH",decimals:18,panel:"3",proxy:!0,underlyingUnits:"WETH",usdPrice:1,underlyingInterestMethod:"none",checkpointTime:new BigNumber(1637655020),checkpointPrice:new BigNumber(1.000903)}),matchPoolToPrices()}function checkMetaMaskExist(){void 0!==window.ethereum&&(detectMetamask=!0,null==getCookie("metamask")?$("#metamask_interactive").html("Connect Wallet"):0==metamaskConnected&&enableMetaMask())}$(window).on("load",function(){checkMetaMaskExist()});async function enableMetaMask(){var e=await ethereum.request({method:"eth_requestAccounts"});if(e){var t=await ethereum.request({method:"eth_chainId"});if(0!=(t=new BigNumber("0x"+t.substring(2))).comparedTo(targetNetwork))return 0==t.comparedTo(56)?void window.location.replace("../"):0==t.comparedTo(1)?(userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),$("#connection_text").html('Switch network from Ethereum network to <a href="https://developer.offchainlabs.com/docs/mainnet#connect-your-wallet" target="_blank">Arbitrum One</a> network<br><a style="font-size: 12px;" href="../deprecated-v1/">View deprecated Ethereum pools</a>'),void ethereum.on("chainChanged",function(e){location.reload()})):void alert("This application requires the Arbitrum One network, please switch it in your MetaMask UI.");userAddress=e[0],metamaskConnected=!0,setCookie("metamask","active",0),$("#loading_panel").hide(),$("#data_panel").show(),getPrices(),$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),ethereum.on("accountsChanged",function(e){userAddress=e[0],$("#metamask_interactive").html(userAddress.substring(0,9)+"..."+userAddress.substring(33)),location.reload()}),ethereum.on("chainChanged",function(e){location.reload()})}}function metamaskButtonClick(){0==detectMetamask?window.open("https://metamask.io/","_blank"):1==detectMetamask&&0==metamaskConnected&&enableMetaMask()}function padleftzero(e,t){return(e=e.toString()).length<t?padleftzero("0"+e,t):e}function padrightzero(e,t){return(e=e.toString()).length<t?padrightzero(e+"0",t):e}function showInactivePools(){$("#inactive_pool_controller").html("INACTIVE POOLS"),$("#inactive_pool_container").show(),0==poolRotation&&0<TVL.comparedTo(0)?(poolRotation=poolList.length,loadInactivePoolList(),clearTimeout(poolTimer),poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4),refreshPoolData(!1)):loadInactivePoolList()}function getPrices(){var t=!1;0==poolList.length&&(t=!0,loadPoolList());$.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",function(e){e&&(ethPrice=new BigNumber(e.ethereum.usd),(pricesList={}).ETH=new BigNumber(ethPrice),matchPoolToPrices(),1==t&&refreshPoolData(!0))})}function matchPoolToPrices(){if(0!=poolList.length)for(var e=0;e<poolList.length;e++)"zs-WETH"!=poolList[e].units&&"zs-imWETH"!=poolList[e].units||(poolList[e].usdPrice=pricesList.ETH)}async function getTotalSupply(){var e=[{to:stbzAddress,data:"0x"+contract_totalsupply},"latest"];await ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));$("#total_supply").html(e.toFormat(2))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}async function getSTBZPrice(){var e=padleftzero(wethSTBZPool.substring(2),64),t=[{to:wethAddress,data:"0x"+contract_balanceof+e},"latest"],o=new BigNumber(0);await ethereum.request({method:"eth_call",params:t}).then(e=>{e=e.substring(2);o=new BigNumber("0x"+e.substring(0,64)).div(new BigNumber(10).pow(18))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),t=[{to:stbzAddress,data:"0x"+contract_balanceof+e},"latest"];var r=new BigNumber(0);if(await ethereum.request({method:"eth_call",params:t}).then(e=>{e=e.substring(2);r=new BigNumber("0x"+e.substring(0,64)).div(new BigNumber(10).pow(18))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0==r.comparedTo(0))return stbzPrice=new BigNumber(0),void $("#stbz_price").html("N/A");stbzPrice=o.times(ethPrice).div(r),$("#stbz_price").html("$"+stbzPrice.toFormat(2))}async function checkSTBZBuybacks(){var e=padleftzero(buybackAddress.substring(2),64),t=[{to:stbzAddress,data:"0x"+contract_balanceof+e},"latest"],o=new BigNumber(0);await ethereum.request({method:"eth_call",params:t}).then(e=>{e=e.substring(2);o=new BigNumber("0x"+e.substring(0,64)).div(new BigNumber(10).pow(18))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))});var r,n=await getApproximateBlockByTimestamp(new BigNumber(Math.floor((new Date).getTime()/1e3)).minus(43200));0!=n.comparedTo(0)&&(r=new BigNumber(0),t=[{to:stbzAddress,data:"0x"+contract_balanceof+e},"0x"+n.toString(16)],await ethereum.request({method:"eth_call",params:t}).then(e=>{e=e.substring(2);r=new BigNumber("0x"+e.substring(0,64)).div(new BigNumber(10).pow(18))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0!=r.comparedTo(0)&&(o.comparedTo(r)<0||(t=o.minus(r),$("#buyback_text").html(t.dp(2).toString(10)+" STBZ"))))}async function getApproximateBlockByTimestamp(e){var t=new BigNumber(0);if(await ethereum.request({method:"eth_blockNumber",params:[]}).then(e=>{e=e.substring(2);t=new BigNumber("0x"+e)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0==t.comparedTo(0))return new BigNumber(0);for(var o=0;o<12;){var r=["0x"+t.toString(16),!1],n=new BigNumber(0);if(await ethereum.request({method:"eth_getBlockByNumber",params:r}).then(e=>{e=e.timestamp.substring(2);n=new BigNumber("0x"+e)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),n.comparedTo(e)<0)return t;if(o++,(t=t.minus(7e3)).comparedTo(0)<=0)return new BigNumber(0)}return new BigNumber(0)}async function calculateUnderlyingInterest(e){var t,o,r,n,i=poolList[e].underlyingInterestMethod,a=poolList[e].panel;"checkpoint"==i?(n=poolList[e].checkpointTime,r=poolList[e].poolToken,n.comparedTo(0)<0?$("#panel_"+a+"_interest_link").html("N/A"):0!=n.comparedTo(0)&&((t=new BigNumber(Math.floor((new Date).getTime()/1e3))).minus(86400).comparedTo(n)<0||(r=[{to:r,data:"0x"+contract_tokenprice},"latest"],await ethereum.request({method:"eth_call",params:r}).then(e=>{e=e.substring(2);o=new BigNumber("0x"+e.substring(0,64))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=poolList[e].checkpointPrice.times(new BigNumber(10).pow(18)),e=o.div(e).minus(1),n=t.minus(n).div(86400),0<(n=e.div(n).times(100).times(365)).comparedTo(.001)?$("#panel_"+a+"_interest_link").html(n.dp(2).toString(10)+"% &#9654;"):$("#panel_"+a+"_interest_link").html("N/A &#9654;")))):"none"==i&&$("#panel_"+a+"_interest_link").html("0% &#9654;")}function checkAllowance(e){var t,o,r=poolList[e].panel;("none"==$("#panel_"+r+"_action_buttons").css("display")&&"none"==$("#panel_"+r+"_unlock_button").css("display")||1==$("#panel_"+r+"_unlock_inner_button").prop("disabled"))&&(t=poolList[e].poolToken,o=padleftzero(userAddress.substring(2),64),e=padleftzero(operatorAddress.substring(2),64),e=[{to:t,data:"0x"+contract_viewallowance+o+e},"latest"],ethereum.request({method:"eth_call",params:e}).then(e=>{e=e.substring(2);new BigNumber("0x"+e.substring(0,64)).comparedTo(1)<0?$("#panel_"+r+"_unlock_button").show():($("#panel_"+r+"_unlock_button").hide(),$("#panel_"+r+"_action_buttons").show())}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}))}async function refreshPoolData(e){if(0==poolRotation)await getTotalSupply(),await getSTBZPrice(),await checkSTBZBuybacks(),TVL=new BigNumber(0),null!=poolTimer&&clearTimeout(poolTimer),poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4);else if(1==e)return null!=poolTimer&&clearTimeout(poolTimer),void(poolTimer=window.setTimeout(function(){refreshPoolData(!0)},6e4));var r,n,i,t,o,a,s,c,l;0!=poolList.length?(checkAllowance(poolRotation),n=poolList[r=poolRotation].panel,o=padleftzero(o=new BigNumber(poolList[r].poolID).toString(16),64),a=[{to:operatorAddress,data:"0x"+contract_poolSize+o},"latest"],await ethereum.request({method:"eth_call",params:a}).then(e=>{e=e.substring(2);i=(i=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[r].decimals)),t=2,i.comparedTo(.01)<0&&(t=8),$("#panel_"+n+"_poolsize").html(i.dp(t).toString(10)+" "+poolList[r].units)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),e=padleftzero(userAddress.substring(2),64),a=[{to:operatorAddress,data:"0x"+contract_poolBalance+o+e},"latest"],await ethereum.request({method:"eth_call",params:a}).then(e=>{e=e.substring(2);s=(s=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[r].decimals)),$("#panel_"+n+"_mybalance").html(s.dp(t).toString(10)+" "+poolList[r].units),s.comparedTo(0)<=0?"none"!=$("#panel_"+n+"_withdraw_button").css("display")&&$("#panel_"+n+"_withdraw_button").hide():"none"==$("#panel_"+n+"_withdraw_button").css("display")&&$("#panel_"+n+"_withdraw_button").show()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),c=new BigNumber(1),1==poolList[r].proxy&&(a=[{to:poolList[r].poolToken,data:"0x"+contract_tokenprice},"latest"],await ethereum.request({method:"eth_call",params:a}).then(e=>{e=e.substring(2);c=(c=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18));e=s.times(c);$("#panel_"+n+"_value").html(e.dp(t).toString(10)+" "+poolList[r].underlyingUnits);e=i.times(c).times(poolList[r].usdPrice);console.log("Pool "+r+" usd value: "+e.dp(2).toString(10)),TVL=TVL.plus(e),(r+1>=poolList.length||0==r)&&$("#tvl").html("$"+TVL.toFormat(2))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})),a=[{to:operatorAddress,data:"0x"+contract_rewardEarned+o+e},"latest"],l=new BigNumber(0),await ethereum.request({method:"eth_call",params:a}).then(e=>{e=e.substring(2);(l=(l=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(18))).comparedTo(0)<=0?"none"!=$("#panel_"+n+"_claim_button").css("display")&&$("#panel_"+n+"_claim_button").hide():"none"==$("#panel_"+n+"_claim_button").css("display")&&$("#panel_"+n+"_claim_button").show(),$("#panel_"+n+"_rewardbalance").html(l.dp(4).toString(10)+" STBZ")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}),0<l.comparedTo(0)&&(a=[{to:operatorAddress,data:"0x"+contract_poolvest+o+e},"latest"],await ethereum.request({method:"eth_call",params:a}).then(e=>{e=e.substring(2),e=new BigNumber("0x"+e.substring(0,64)).div(1e3);$("#panel_"+n+"_rewardfee").html(e.dp(3).toString(10)+"%")}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})),a=[{to:operatorAddress,data:"0x"+contract_rewardRate+o},"latest"],await ethereum.request({method:"eth_call",params:a}).then(e=>{var t=e.substring(2),o=new BigNumber("0x"+t.substring(0,64));"LP"!=poolList[r].units?(o=(o=o.div(new BigNumber(10).pow(18))).times(stbzPrice),0<i.comparedTo(0)&&(1==poolList[r].proxy&&0==(i=i.times(poolList[r].usdPrice).times(c)).comparedTo(0)&&(i=new BigNumber(1)),0==poolList[r].proxy&&(console.log("Pool Normal "+r+" usd value: "+i.dp(2).toString(10)),TVL=TVL.plus(i)),o=o.div(i)),e=2,(t=(t=o.times(new BigNumber(86400))).times(100)).comparedTo("0.01")<0&&(e=8),$("#panel_"+n+"_dpy").html(t.dp(e).toString(10)+"%"),e=2,(t=t.times(365)).comparedTo("0.01")<0&&(e=8),$("#panel_"+n+"_apr").html(t.dp(e).toString(10)+"%"),e=2,(t=(t=t.div(100)).div(4).plus(1).pow(4).minus(1).times(100)).comparedTo("0.01")<0&&(e=8),e=t.dp(e).toString(10)+"%",0<t.comparedTo("1000000")&&(e="> 1000000%"),1==poolList[r].proxy?(t="---",0<$("#panel_"+n+"_interest_link").length&&(t=$("#panel_"+n+"_interest_link").html()),$("#panel_"+n+"_apy").html(e+" + <a id='panel_"+n+"_interest_link' href='wrap/' style='color: rgb(40,200,40);'>"+t+"</a>"),calculateUnderlyingInterest(r)):$("#panel_"+n+"_apy").html(e),r+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getPrices(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500)):getLPTokenDPY(r,i,o)}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})):$("#tvl").html("N/A")}function getLPTokenDPY(a,s,c){var e=[{to:poolList[a].poolToken,data:"0x"+contract_getreserves},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var e=e.substring(2),n=new BigNumber("0x"+e.substring(0,64)),i=new BigNumber("0x"+e.substring(64,128)),e=[{to:poolList[a].poolToken,data:"0x"+contract_token0address},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var o=e.substring(2).substring(0,64).toLowerCase(),r=padleftzero(wethAddress.substring(2),64).toLowerCase(),e=[{to:poolList[a].poolToken,data:"0x"+contract_totalsupply},"latest"];ethereum.request({method:"eth_call",params:e}).then(e=>{var t=e.substring(2),e=new BigNumber("0x"+t.substring(0,64));e.comparedTo(0)<=0||ethPrice.comparedTo(0)<=0||(t=0,o==r?(n=n.div(new BigNumber(10).pow(18)).times(ethPrice),i=new BigNumber(n)):(i=i.div(new BigNumber(10).pow(18)).times(ethPrice),n=new BigNumber(i)),t=n.plus(i),e=e.div(new BigNumber(10).pow(18)),e=s.div(e),(t=t.times(e)).comparedTo(0)<=0?t=1:(console.log("LP Pool usd value: "+t.dp(2).toString(10)),TVL=TVL.plus(t)),e=(e=(c=(c=(c=c.div(new BigNumber(10).pow(18))).times(stbzPrice)).div(t)).times(new BigNumber(86400))).times(100),$("#panel_"+poolList[a].panel+"_dpy").html(e.dp(2).toString(10)+"%"),t=e.times(365),$("#panel_"+poolList[a].panel+"_apr").html(t.dp(2).toString(10)+"%"),t=(e=(e=t.div(100)).div(4).plus(1).pow(4).minus(1).times(100)).dp(2).toString(10)+"%",0<e.comparedTo("1000000")&&(t="> 1000000%"),$("#panel_"+poolList[a].panel+"_apy").html(t),a+1>=poolList.length&&$("#tvl").html("$"+TVL.toFormat(2)),++poolRotation>=poolList.length?(getPrices(),poolRotation=0):window.setTimeout(function(){refreshPoolData(!1)},500))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function unlockToken(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var r=new BigNumber(2).pow(256).minus(1),n=padleftzero((n=operatorAddress.substring(2)).toLowerCase(),64),r=padleftzero(r=r.toString(16),64);sendETHTransaction([{to:poolList[t].poolToken,from:userAddress,data:"0x"+contract_approve+n+r}],function(){$("#panel_"+e+"_unlock_inner_button").prop("disabled",!0),$("#panel_"+e+"_unlock_inner_button").html("UNLOCKING "+poolList[t].units)})}function selectMaxOut(t){for(var o=0,e=0;e<poolList.length;e++)if(parseInt(poolList[e].panel)==t){o=e;break}var r=padleftzero(r=new BigNumber(poolList[o].poolID).toString(16),64),n=padleftzero(userAddress.substring(2),64),n=[{to:operatorAddress,data:"0x"+contract_poolBalance+r+n},"latest"];ethereum.request({method:"eth_call",params:n}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[o].decimals));$("#panel_"+t+"_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function selectMaxIn(t){for(var o=0,e=0;e<poolList.length;e++)if(parseInt(poolList[e].panel)==t){o=e;break}var r=padleftzero(userAddress.substring(2),64),r=[{to:poolList[o].poolToken,data:"0x"+contract_balanceof+r},"latest"];ethereum.request({method:"eth_call",params:r}).then(e=>{e=e.substring(2),e=(e=new BigNumber("0x"+e.substring(0,64))).div(new BigNumber(10).pow(poolList[o].decimals));$("#panel_"+t+"_amount").val(e.toString(10))}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))})}function deposit(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var r,n=new BigNumber($("#panel_"+e+"_amount").val());n.isNaN()||n.comparedTo(0)<=0||(r=padleftzero(r=(n=n.times(new BigNumber(10).pow(poolList[t].decimals))).toString(16),64),n=padleftzero(n=new BigNumber(poolList[t].poolID).toString(16),64),sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+contract_deposit+n+r}],null))}function withdraw(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var r,n,i=new BigNumber($("#panel_"+e+"_amount").val());i.isNaN()||i.comparedTo(0)<=0||(r=contract_withdraw_noclaim,1==confirm("Do you want to also claim rewards (fees apply)? Press cancel for no.")&&(r=contract_exit),n=padleftzero(n=(i=i.times(new BigNumber(10).pow(poolList[t].decimals))).toString(16),64),i=padleftzero(i=new BigNumber(poolList[t].poolID).toString(16),64),sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+r+i+n}],null))}function claimReward(e){for(var t=0,o=0;o<poolList.length;o++)if(parseInt(poolList[o].panel)==e){t=o;break}var r=$("#panel_"+e+"_rewardfee").html();if("0%"!=r&&0==confirm("You are not fully vested, are you sure you want to claim?"))return;r=padleftzero(r=new BigNumber(poolList[t].poolID).toString(16),64);sendETHTransaction([{to:operatorAddress,from:userAddress,data:"0x"+contract_claimReward+r}],null)}async function sendETHTransaction(e,t){var o=await ethereum.request({method:"eth_chainId"});0==(o=new BigNumber("0x"+o.substring(2))).comparedTo(targetNetwork)?ethereum.request({method:"eth_sendTransaction",params:e}).then(e=>{console.log("Transaction hash: "+e),t&&t()}).catch(e=>{console.log("An error occurred while pinging blockchain: "+JSON.stringify(e))}):alert("This application requires the main network, please switch it in your MetaMask UI.")}function setCookie(e,t,o){var r,n="";0<o&&((r=new Date).setTime(r.getTime()+24*o*60*60*1e3),n="; expires="+r.toUTCString()),document.cookie=e+"="+(t||"")+n+"; path=/; SameSite=Strict"}function getCookie(e){for(var t=e+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var n=o[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return null}function eraseCookie(e){document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}